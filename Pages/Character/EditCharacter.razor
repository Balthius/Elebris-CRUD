@page "/Character/Edit/{characterId:int}"
@inject ICharacterData charaData
@inject NavigationManager UriHelper
<h3>Edit</h3>

<CharacterForm ButtonText="Update" SelectedCharacter="SelectedCharacter"
      OnValidSubmit="EditExistingCharacter" />


@code {
    [Parameter] public int characterId { get; set; }

    CharacterModel SelectedCharacter = new CharacterModel();

    protected async override Task OnParametersSetAsync()
    {
        CharacterModel model = await charaData.GetCharacterByID(characterId);

        SelectedCharacter = ModelConverter.CovertFromDBModel(model);
    }
    public async Task EditExistingCharacter()
    {
        CharacterModel dbModel = ModelConverter.CovertToDBModel(SelectedCharacter);
        int id = await charaData.UpdateCharacter(dbModel);
        NavigateToFetchData();
    }
    public void NavigateToFetchData()
    {
        UriHelper.NavigateTo("/Character/FetchData");
    }
}

@*https://codewithmukesh.com/blog/blazor-crud-with-entity-framework-/*@